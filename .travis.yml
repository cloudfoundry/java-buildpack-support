---
language: java
script: |
    if [[ "$SONAR_BUILD" == 'true' && "$TRAVIS_SECURE_ENV_VARS" == 'true' ]] ; then
      mvn sonar:sonar -Dsonar.host.url="$SONAR_HOST_URL" -Dsonar.login="$SONAR_LOGIN" -Dsonar.password="$SONAR_PASSWORD" -Dsonar.jdbc.url="jdbc:mysql://$SONAR_JDBC_URL?useUnicode=true&characterEncoding=utf8&rewriteBatchedStatements=true" -Dsonar.jdbc.username="$SONAR_JDBC_USERNAME" -Dsonar.jdbc.password="$SONAR_JDBC_PASSWORD"
    else
      mvn test
    fi
jdk:
  - openjdk6
  - openjdk7
  - oraclejdk8
env:
  global:
    - secure: N6o9f3DxvaCiAvNgk4y6nBw3rFbsyMRTsTgZzj2yVeZ37s6tC29EwDIIc5o4CoA9yFCSXbvqrfa/qcJI2uzcf+8TEm8CCjGJItzsX6V/fBWtifi1LrBS1ArtKpATYERbds/DzYXDs70fvEoD9w6JZAKWmSWv8LBhm93BdwYqxNI= # SONAR_HOST_URL
    - secure: R4BfGSy/EL1fsB3srAo9+bzBjt+0PwR6Qz6jcZHzxbgMWw9OeRiBA9Sg+yautvsp+UzSAno+uLI2ouFHqtK205obX0Z4uFfEpBdRhLiABNvE0bGe21QXNS2zUxcjIaX1k24JuFpoAXZMQqE4KkeoHMCZmO0d+Fml1dB2nKZcm+M= # SONAR_LOGIN
    - secure: OeCbydXu4YKFuBKrmiwfft3kKYHFKM+yxjBOw/66UZAS7fotQikh6kWxeMZBW79lf0588zbAuzmbbBNuUVgU4nySPJPi+C+hRcHe2PUzdpnCwDBqtR8Hr/44PymdILQ1OtjhcDExlK2S3D4hG25sYJKbo79Q6yQqFIXQlFINUoQ= # SONAR_PASSWORD
    - secure: JDaqpJ4w0agyOa6jpXRye5DrmUXn394ILvkxTD5QQx5oTyY0CExWb4vGQE3vbsGTeawsd5u96OrSyjIiZYFni58lMGKP+JoUb7zzIhRmuvJR7DDISknxgzyyHMqvF8xUh0v/mRK7I5FWVGofn1HB//faTO58sdwh+UHFF6CSAMA= # SONAR_JDBC_URL
    - secure: l6E7KYjj7yVCmXRd9XwPhkfbz3JLPjb4f5wDWGQetF8ZlL4z9KGjqIc4g/0dChWhaWsWhSQHYSKTWsYujxhUL99UN1JSjY+Mau6zQL+P5MX+mXBhlQ95oPwHkW08Qd/2b68NsABZjC8X/C7LaLVkuBpp43ylOkKPX+3T9TUHWTQ= # SONAR_JDBC_USERNAME
    - secure: gmEpaPd7wfMhltpouutOAUi+V3V8KPelrhuoJW5aETnCAYUm6jTPDY3xlwxAZZwUp8JHpjSH/pCfEhaKyB6IX4mrTEFiSAptcTAfo4O8W4YyOHdbyW4rPGpUusTv18FxmT54yvHw+0C63rQ4FEI4XkiXnh2+E1bS1g1/F36ayIk= # SONAR_JDBC_PASSWORD
  matrix:
    - SONAR_BUILD=true
    - SONAR_BUILD=false
matrix:
  exclude:
    - jdk: openjdk6
      env: SONAR_BUILD=true
    - jdk: oraclejdk8
      env: SONAR_BUILD=true
notifications:
  webhooks:
    urls:
      - http://build-monitor.cfapps.io/projects/JBPS/webhook
    on_start: true
